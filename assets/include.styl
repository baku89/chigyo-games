$three-cols-width = 1400px
$two-cols-width = 960px
$mobile-width = 768px

mobile()
	@media (max-width $mobile-width)
		{block}

not-mobile()
	@media (min-width ($mobile-width + 1px))
		{block}

narrower-than($width)
	@media (max-width $width)
		{block}

wider-than($width)
	@media (min-width ($width + 1px))
		{block}

// ------------------------------------------------------------------------------
// Page Layout
page-root()
	max-width 100vw
	padding 0 var(--page-padding) 0
	gap 0 var(--page-column-gap)
	display grid
	align-items start
	// Three columns
	grid-template-columns 1fr var(--prose-width) 1fr

	// Two columns
	+narrower-than($three-cols-width)
		grid-template-columns var(--prose-width) 1fr

	// One column
	+narrower-than($two-cols-width)
		grid-template-columns 1fr

// ------------------------------------------------------------------------------
// Common Styles

// Link
link($underline = true)
	if ($underline)
		text-underline-offset 3px
		text-decoration underline
		text-decoration-style solid
		text-decoration-thickness 1px
		text-decoration-color var(--color-subtle)

	&:hover
		color var(--color-bg)
		text-decoration none
		border-radius var(--radius-inline)
		rainbow-bg()

external-link-icon()
	&:after
		material-symbol()
		content 'arrow_outward'
		vertical-align middle

	&:not(:hover):after
		color var(--color-mute)

$rainbow-bg-size = 2000px

rainbow-bg()
	background var(--gradient-horizontal)
	background-attachment fixed
	background-position 0 0
	background-size $rainbow-bg-size 1px
	animation-name link-bg-anim
	animation-duration 2s
	animation-timing-function linear
	animation-iteration-count infinite

@keyframes link-bg-anim
	from
		background-position-x 0px

	to
		background-position-x $rainbow-bg-size

block-paren-start()
	position relative

	&::before
		content ''
		position absolute
		top 0
		left 0
		width 100%
		height var(--radius-full)
		border-radius var(--radius-full) var(--radius-full) 0 0
		border 1px solid var(--color-border)
		border-bottom none

wavy-border()
	height 16px
	background-image url('/assets/wavy-border.svg')
	background-size auto 100%
	background-repeat repeat-x
	background-position 0 0

button-style()
	background-color var(--color-hover)
	link(false)
	border-radius 9999px !important
	border 1px solid var(--color-border)
	cursor pointer
	display inline-block
	text-decoration none
	margin-block 2px
	padding 0.25lh 0.5lh
	font-heading()

	&:hover
		border-color transparent

sticky-style()
	backdrop-filter blur(8px)
	background-color with-alpha(var(--color-bg), 80%)
	border-radius var(--radius-full)

box-shadow()
	box-shadow 0 4px 16px rgba(0, 0, 0, 0.15)

with-alpha($color, $alpha)
	return unquote('color-mix(in lch, ' + $color + ', transparent ' + $alpha + ')')

// ------------------------------------------------------------------------------
// Utilities
trim-margin()
	> :first-child
		margin-top 0 !important

	> :last-child
		margin-bottom 0 !important

stylistic-alternative()
	&::first-letter
		font-feature-settings 'salt'

// ------------------------------------------------------------------------------
// Typography
font-heading()
	font-family var(--font-heading)

font-code()
	font-family var(--font-code)
	font-weight 300
	font-optical-sizing auto
	font-feature-settings 'palt' off, 'kern' off

font-body()
	font-family var(--font-body)

// Only used in H2
font-demi-light()
	font-weight var(--font-demi-light)

font-regular()
	font-weight var(--font-regular)

font-medium()
	font-weight var(--font-medium)

text-xs()
	font-size var(--text-xs)
	line-height var(--text-xs--line-height)

text-sm()
	font-size var(--text-sm)
	line-height var(--text-sm--line-height)

text-base()
	font-size var(--text-base)
	line-height var(--text-base--line-height)

text-xl()
	font-size var(--text-xl)
	line-height var(--text-xl--line-height)

text-2xl()
	font-size var(--text-2xl)
	line-height var(--text-2xl--line-height)

text-3xl()
	font-size var(--text-3xl)
	line-height var(--text-3xl--line-height)

text-4xl()
	font-size var(--text-4xl)
	line-height var(--text-4xl--line-height)

material-symbol()
	font-family 'Material Symbols Sharp'
	font-weight normal
	font-style normal
	line-height 1
	letter-spacing normal
	text-transform none
	display inline-block
	white-space nowrap
	word-wrap normal
	direction ltr
	-webkit-font-feature-settings 'liga'
	-webkit-font-smoothing antialiased